
rand7 变 rand10
(rand7-1)*7+rand7 ;拒绝采样

sql 成绩大于80，where不能和聚合函数一起用
1. select name from chengji group by name having min(fenshu)>=80;
2. select distinct name from chengji where name not in (select distinct name from chengji where fenshu<=80);
   
0-9，10个点循环，第N步在0点的个数

https连接过程
数据库悲观锁、乐观锁
数据库一致性
实现线程安全

TCP如何保证可靠传输：
1. 面向连接
2. 序列号
3. 超时重传
4. 检验和
5. 流量控制
6. 滑动窗口
7. 拥塞控制
   1. 慢启动+拥塞避免线性增长
   2. 快重传+快恢复

数据库一致性
1. a，通过undo日志
2. c，通过aid保证c。数据库的一致性是为了保证数据的完整性，数据如果有约束性，那么事务执行前后，数据的约束性还是存在的，并没有破坏掉。
   1. 保证数据的一致性、正确性、有效性、相容性
3. i，锁+MVCC
4. d，通过redo日志

数据库锁
1. 按锁的粒度划分：表级锁、行级锁、页级锁
   1. 表锁，开销小，加锁快；不会出现死锁；锁定粒度大，发生锁冲突的概率最高，并发度最低；
      1. 共享锁，select ... lock in share mode
      2. 排它锁，select ... for update 
      3. 意向锁
   2. 行锁，开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低，并发度也最高；
      1. 共享锁
      2. 排它锁
      3. 意向锁
   3. 页锁
   4. innodb锁表的情况
      1. 事务的隔离级别为：可重复读时，如果有索引（包括主键索引），以索引列为条件更新数据，会存在间隙锁，行锁，页锁，而锁住一些行。如果没有索引，更新数据时会锁住整张表。
      2. 事务隔离级别为：串行化时，读写数据都会锁住整张表。

2. 按锁级别划分：共享锁、排它锁、意向锁
   1. 排它锁
      1. 记录锁
      2. 间隙锁，在RR隔离级别下，我们用范围条件而不是相等条件检索数据并请求共享锁或排他锁时，InnoDB会给符合条件的已有数据记录的索引项加锁；对于键值在条件范围内但并不存在的记录，叫做“间隙（GAP)”。1，2，3，....,49,50，select * from emp where userId > 49 for update;会对userId大于50（这些记录并不存在）的“间隙”加锁。
      3. next key 锁，临键锁

3. 按加锁方式划分：自动锁、显示锁
   1. 显示锁
      1. select lock in share mode(共享锁)
      2. select for update ; 排它锁
   2. 自动锁，数据库根据隔离级别自动加锁

4. 按使用方式划分：乐观锁、悲观锁
   1. 悲观锁：悲观并发控制PCC，访问数据前进行加锁。通过数据库的锁机制 
   2. 乐观锁：乐观并发控制OCC，只在更新数据时进行检测
      1. 版本号
      2. 时间戳
   3. MVCC多版本并发控制
      1. 当前读
         1. select lock in share mode(共享锁)
         2. select for update ; 排它锁
      2. 快照度

java与python区别
1. java是面向对象，python既面向对象也面向过程
2. 都是跨平台的
3. java是半解释半执行语音。python是脚本语言，有相应的脚本引擎才可以运行
4. 使用区别
   1. Java版本比较稳定，python2/3不兼容（推荐学习3版本的）
   2. Java偏向于商业开发/团队合作，Python偏向于数据分析
   3. Java需要编译运行，Python可以直接运行
   4. Java每行需要以；结束，Python可以不写；
   5. Java类需要声明，Python类型不需要
   6. Java里的块用大括号对，Python以冒号+四个缩进符表示
   7. Java是一种静态语言，Python是一种动态类型语言


# linux
1. 查询文件，find
2. 查询日志  tail -fn 1000   循环查看1000记录，f循环，n显示行数
3. 查看java进程 ps -ef|grep java  或者 ps -aux |grep java
4. 杀死进程 kill -9 pid   -9强制杀死
5. find命令是根据文件的属性进行查找，如文件名，文件大小，所有者，所属组，是否为空，访问时间，修改时间等。 
   1. find / -name httpd.conf　　#在根目录下查找文件httpd.conf，表示在整个硬盘查找
   2. find /etc -name httpd.conf　　#在/etc目录下文件httpd.conf
6. grep是根据文件的内容进行查找，会对文件的每一行按照给定的模式(patter)进行匹配查找。
7. cpu负载率一直很高：可能死循环
   1. top -d <刷新时间间隔>来指定刷新频率，top -d 0.1


# 计算机网络
1. get、post区别
   1. get用于获取信息，无副作用，能被缓存，在后退刷新时没有影响，发送数据长度有限制最大url2048字符
   2. post用于修改数据，有副作用，在后退刷新时post会重新提交表单
   3. 防止重复提交表单
      1. 在数据库添加唯一字段
      2. 用js为添加按钮禁用
      3. 使用Session设置令牌
2. put用于传输文件
3. https连接过程，443端口
   1. ssl连接
      1. 客户端发送hello请求，请求中包含了ssl的版本以及加密组件
      2. 服务器端发送hello回答，并返回相应的组件，发送CA证书（包含公钥），hello dong报文
      3. 以client key exchange回应，报文中包含了premaster secret（被公钥加密）；发送change cipher spec报文，提示服务器，在此之后的通信采用pre-master secret密钥加密；发送finished报文
      4. 服务器私钥解码得到pre-master secret，结合两个随机字符串生成master secret；发送change cipher spec、finished报文
   2. 发送http请求
   3. 断开连接
      1. 断开ssl连接，客户端断开，发送close_notify
      2. 断开tcp连接
4. 302，303
   1. 302是http1.0的协议状态码，在http1.1版本的时候为了细化302状态码又出来了两个303和307。
   2. 303明确表示客户端应当采用get方法获取资源
5. IO模型
   1. nio，非阻塞io，io多路复用
   2. bio，阻塞io
   3. aio，事件驱动

# 数据库
1. B+树只有3-4层： InnoDB 页的大小默认是 16k
2. 添加索引
   1. create index index_name on table_name (column_list) ;
   2. create unique index index_name on table_name (column_list) ;


# redis
1. 保证一致性







#  场景，阿里妈妈
1. ide自动补全
2. java类的整个过程
3. 设计模式，适配模式和代理模式
   1. 适配模式：兼容，适配器模式是将一个类(a)通过某种方式转换成另一个类(b).
   2. 代理模式：隔离，代理模式是将一个类(a)转换成具体的操作类(b).
   3. 装饰模式：增强功能，是在一个原有类(a)的基础之上增加了某些新的功能变成另一个类(b).
4. 收集器
5. 并发
6. io多路复用框架，bio、aio、nio，netty框架，http框架
7. get post请求，处理重复提交表单
8. spring相关框架源码看过多少
9. a公司，b公司，c需要ab数据，ab经常取不到，怎么解决，异步处理


# 大数据问题


# java基础
1. throw、throws、try catch
   1. throw抛出一个异常，并获取这个异常的引用，这个异常会被抛到外部的环境，由外部环境进行处理
   2. throws，是一个异常声明，可能会抛出异常
   3. try catch：try处理可能会出现异常的代码段，catch用来处理异常
   4. 运行异常，编译可以通过
   5. 受检查异常需要捕获或者抛给外部处理

## cco
1. 读多写少的场景
   1. 可以采用Redis存储部分高并发读请求数据，减轻数据库压力；
   2. 搭建数据库集群，独立读库与写库，读写请求分离；
2. 配置中心设计
   1. 
3. 数据库主从复制
4. 自增式id，分布式id
   1. UUID
   2. 数据库自增ID
   3. 数据库多主模式
   4. 号段模式
   5. Redis
   6. 雪花算法（SnowFlake）
   7. 滴滴出品（TinyID）
   8. 百度 （Uidgenerator）
   9. 美团（Leaf）
5. redis事务错误
   1. 入队错误，一个命令可能排队失败，所以在调用EXEC之前可能会出错。遇到语法错误的会回滚全部操作
   2. 运行时错误，调用 EXEC 后命令可能会失败，例如因为我们对具有错误值的键执行了操作（例如对字符串值调用列表操作）。不会回滚整个事务，执行到失败的命令后抛出错误继续往下执行队列里的命令
   3. 作者不支持运行时错误的事务回滚的原因有以下两个：
      1. 他认为 Redis 事务的执行时，错误通常都是编程错误造成的，这种错误通常只会出现在开发环境中，而很少会在实际的生产环境中出现，所以他认为没有必要为 Redis 开发事务回滚功能；
      2. 不支持事务回滚是因为这种复杂的功能和 Redis 追求的简单高效的设计主旨不符合。
6. java类加载
7. 线程池
8. 数据库隔离机制
9.  redis基本数据类型、持久化机制
10. jvm调优
11. 数据库调优
12. linux命令，连接池有问题，日志定位问题
13. rtt高，表示从发送端发送数据开始，到发送端收到来自接收端的确认（接收端收到数据后便立即发送确认，不包含数据传输时间）总共经历的时间。
    1.  RTT由三个部分决定：链路的传播时间、末端系统的处理时间、路由器的缓存中的排队和处理时间。其中前两个部分的值作为一个TCP连接相对固定，路由器的缓存中的排队和处理时间会随着整个网络拥塞程度的变化而变化。所以RTT的变化在一定程度上反映了网络拥塞程度的变化。
    2.  在RPC中是一个重要的指标。


14. 比较眼前一亮的项目有哪些
15. 
16. 面试比较关注哪方面的生态、框架
17. dubbo、
18. java

19. zookeeper
20. jvm优化
21. redis事务


百度
1. zookeeper
2. threadlocal
3. 多线程工具
4. G1 (Garbage-First) 是一款面向服务器的垃圾收集器,主要针对配备多颗处理器及大容量内存的机器. 以极高概率满足 GC 停顿时间要求的同时,还具备高吞吐量性能特征.
5. io多路复用
6. 分布式事务



# 项目
面试官你好，我叫王玉  目前就读于中国科学技术大学 大数据学院 专业是计算机技术，预计明年六月毕业。本科毕业于合肥工业大学计算机学院，专业是计算机科学与技术。我研究生阶段的研究方向是行为识别和视频分类。研二期间参加实验室横向课题，由中科大、华为合作的省重大专项课题。基于工业大数据背景，推动制造业智能化进程，我负责的模块是驾驶员异常行为识别，通过复现现有行为识别模型，针对现实场景数据集特点构建自己的模型，最后进行对比和消融实验。同时，还有一个与java相关的基于SSM社区讨论项目，这个项目整合spring boot、spring MVC、Mybatis实现了用户注册登录退出功能，核心功能是发帖评论私信功能，整合了redis实现了实现高频率的点赞、 关注功能； 通过 HyperLogLog、 BitMap 实现网站 UV、DAU 的统计； 通过缓存用户数据，提高性能
3、 整合 Kafka，异步处理系统通知评论、点赞、关注事件；整合 Quartz 定时任务实现热门帖子排行榜功能

1. 结果：结合海螺水泥实地生产环境，构建情境行为识别模型，达到准确率83%·
2. 过程：实地调研，
3. 获取数据集，数据集预处理，现有行为识别模型复现，并通过数据集进行验证，构建模型
4. 难点：
   1. 现有行为识别模型复现
   2. 以及针对特定场景的视频数据特点，进行模型构建
5. 下一步：进一步提升模型的正确率，并进行部署（异步处理）


面试官你好，我叫王玉  目前就读于中国科学技术大学 大数据学院 专业是计算机技术，预计明年六月毕业。本科毕业于合肥工业大学计算机学院，专业是计算机科学与技术。在本硕期间多次获得院系奖学金。我研究生阶段的研究方向是行为识别和视频分类。研二期间参加实验室横向课题，由中科大、华为合作的省重大专项课题。基于工业大数据背景，推动制造业智能化进程，我负责的模块是驾驶员异常行为识别，通过复现现有行为识别模型，针对现实场景数据集特点构建自己的模型，最后进行对比和消融实验。同时，还有一个与java相关的基于SSM社区讨论项目，这个项目整合spring boot、spring MVC、Mybatis实现了用户注册登录退出功能，核心功能是发帖、评论、点赞、关注等功能


## 为什么选择携程
1. 携程作为OTA的龙头企业，规模庞大（携程在全球200个国家和地区与近80万家酒店建立了长期稳定的合作关系，其机票预订网络已覆盖国际国内绝大多数航线），技术领先（携程建立了一整套现代化服务系统，包括：海外酒店预订新平台、国际机票预订平台），体系规范（携程先进的管理和控制体系提供了高质量的服务）。
2. 携程能提出一套方案解决长期疫情带来的效益问题。

## 最大的困难
1. 技术问题一般都不是什么困难，就我课题项目来说，如何协调团队通力合作完成项目是最难的
2. 作为小组的组长，将组员分成三组，各自完成各自的模块，最后一起讨论并相互总结

## 最满意的项目
1. 实地调研阶段，与一线员工讨论相关细节问题，与负责人确定项目问题。对于程序员来说是难得的经历
2. 通常的编码阶段：数据采集，数据处理，模型构建，模型优化。
   1. 难点在于需要复现现有的行为识别模型
   2. 针对特定场景的视频数据特点，进行模型构建

## 职业规划
1. 短期计划：不断学习技术，深耕技术栈，把自己学到的理论知识应用到实际的项目中去
2. 长期计划：在项目中不断学习总结，同时跟领导学习项目的把控、人员的协调等内容，争取做一个兼具技术和管理的人
3. 当然我知道计划赶不上变化，如果业务和团队有变化，我也改变角色规划。

## 优缺点
1. 优点
   1. 专注
   2. 乐于助人，当我完成自己的工作后，通常会帮助那些还没完成任务的同学
2. 缺点
   1. 有点固执：通常为了解决问题会不吃饭
   2. 

## 遇到问题如何解决
1. 找出原因->寻找解决方案->总结
2. 尝试自己解决；寻找帮助

## 投递了哪些公司
1. 字节、美团（二面挂了）、阿里（没面了）、携程、hulu（没面了）

## 辞职考研
1. 工作没有挑战性，涉及的技术比较浅，很长时间内没法进步

## 加班问题
1. 如果工作需要，比如项目上线等，我还是很乐意加班的，因为自己
2. 平时的话尽量提高工作效率，减少加班，加班太晚会影响明天的工作效率，形成恶性循环


## 最近干嘛
1. 看github、课题实验
2. 看书

## 反问
1. 简历未更新
2. 新员工培养计划
3. 前面两位面试官对我的评价
4. 大概多久会收到结果通知



RPC netty